---
title: "Final Project: Data Visualizations"
author: "Rui Wang, Ali Prasla, Julio Gonzalez"
output: 
  html_document:
     toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
![](00 Doc/NYSE.jpg)

## Steps we took to complete project

###ETL ("Clean Up") the Data -
 
```{r ETL,eval = FALSE}
source ("../01 Data/R_ETLWages1.csv")
source ("../01 Data/R_ETLWages2.csv")
```
###Data Description
This data set contains the following fields:

 - id- 
 
 - date-
 
 - year- 
 
 - industry_format
 
 - ticker- 
 
 - name-
 
 - currency
 
 - total_assets
 
 - income
 
 - employe
 
 - total liabilities
 
 - income_tax_paid-
 
 - operating_expenses
 
 - status
 
 - market_value
 
 - price
 
 - city
 
 - state
 
###Joining the Data

We joined the data using a inner join to combine states with their respective regions. 


```{}
SELECT id, date, year, industry_format, ticker, name, currency, total_assets, income,
       employee, total_liabilities, income_tax_paid, operating_expenses, status, market_value, price,
       city, US_Companies.csv.abbreviation, state, largest_industry
       FROM 'US_Companies.csv', 'LargestIndustry.csv'
       WHERE US_Companies.csv.abbreviation = LargestIndustry.csv.abbreviation
```
#Tableau

###Non-Aggregated Measures Analysis
-We did a boxplot showing states with how much total income tax companies that were headquatered in each state.

###Aggregated Measures Analysis
-For this case, we did a histogram dual axis histogram showing income in bins versus count of total income on y1 axis and income paid individually by each company on y2 axis.

###Scatter Plots
-We also created a scatter plot ploting market value vs income then creating an Action to filter for each of the four Regions. We also created a dashboard that has the scatterplot along with a table highlighting the total market value and income for each Region.

###Crosstabs
-For this section, we created a crosstab that has state in one column, total income in another column and total assets for each state in another column. Each state is colored by the KPI we created in which we evaluate the state's Return on Assets (ROA). A High ROA state is colored blue, a Low ROA state is orange while a Negative ROA is colored 
-Red.

###Barcharts


## Shiny
  After we had workable data, we developed a Shiny App. Each tab of the Shiny App displays the equivalent ggplot code that creates the same visualization as Tableau. 
  
If you wish to run the app, it is under 02 Shiny. It is also hosted with this URL. https://chriswongwr.shinyapps.io/project6/

  